-- CRIA TABELA ALUNO 
CREATE TABLE Aluno (
    Id INTEGER PRIMARY KEY NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    Nome VARCHAR NOT NULL,
    Fone VARCHAR NOT NULL,
    Cpf VARCHAR NOT NULL,
    DtNasc DATE NOT NULL,
    Sexo VARCHAR
);

-- CRIA TABELA ENDERECO
CREATE TABLE Endereco (
    Id INTEGER PRIMARY KEY NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    Rua VARCHAR NOT NULL,
    Numero INTEGER NOT NULL,
    Bairro VARCHAR NOT NULL,
    Cidade VARCHAR NOT NULL,
    Estado VARCHAR NOT NULL,
    Outros VARCHAR,
    fk_Aluno_Id INTEGER NOT NULL
);
 
ALTER TABLE Endereco ADD CONSTRAINT FK_Endereco_2
    FOREIGN KEY (fk_Aluno_Id)
    REFERENCES Aluno (Id)
    ON DELETE CASCADE;

-- CRIA TABELA CURSO
CREATE TABLE Curso (
    Id INTEGER PRIMARY KEY NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    Nome VARCHAR NOT NULL,
    Semestre INTEGER
);

-- CRIA TABELA PROFESSOR
CREATE TABLE Professor (
    Id INTEGER PRIMARY KEY NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    Nome VARCHAR NOT NULL,
    Graduacao VARCHAR NOT NULL,
    Fone VARCHAR NOT NULL
);

-- CRIA TABELA MATRICULA
CREATE TABLE Matricula (
    Id INTEGER PRIMARY KEY NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    fk_Aluno_Id INTEGER NOT NULL,
    fk_Curso_Id INTEGER NOT NULL,
    Data_Matricula DATE NOT NULL
);
 
ALTER TABLE Matricula ADD CONSTRAINT FK_Matricula_1
    FOREIGN KEY (fk_Aluno_Id)
    REFERENCES Aluno (Id)
    ON DELETE SET NULL;
 
ALTER TABLE Matricula ADD CONSTRAINT FK_Matricula_2
    FOREIGN KEY (fk_Curso_Id)
    REFERENCES Curso (Id)
    ON DELETE SET NULL;
	
-- CRIA TABELA DISCIPLINA 
CREATE TABLE Disciplina (
    Id INTEGER PRIMARY KEY NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    Nome VARCHAR NOT NULL,
    fk_Professor_Id INTEGER NOT NULL,
    fk_Curso_Id INTEGER NOT NULL
);
 
ALTER TABLE Disciplina ADD CONSTRAINT FK_Disciplina_1
    FOREIGN KEY (fk_Professor_Id)
    REFERENCES Professor (Id)
    ON DELETE RESTRICT;
 
ALTER TABLE Disciplina ADD CONSTRAINT FK_Disciplina_2
    FOREIGN KEY (fk_Curso_Id)
    REFERENCES Curso (Id)
    ON DELETE RESTRICT;